<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>For You My Love</title>
  <link rel="stylesheet" href="letter.css" />
</head>
<body>
  <div class="container">
    <!-- Love Letter -->
    <div class="letter">
      <h1>FOR YOU MY LOVE ğŸ’Œ</h1>
      <p>
        My dearest love,<br><br>
        Every heartbeat of mine whispers your name.  
        Every breeze carries your fragrance.  
        You are my today, my tomorrow, and my forever. ğŸ’–  
        <br><br>With endless love,<br>Yours always â¤ï¸
      </p>
    </div>

    <!-- Video Section -->
    <div class="video-container">
      <video id="loveVideo" autoplay loop playsinline>
        <source src="./pictures/video.mp4" type="video/mp4" />
        Your browser does not support the video tag.
      </video>
      <button id="playPauseBtn" class="hidden">â¸ï¸</button>
    </div>
  </div>
<script>
const video = document.getElementById("loveVideo");
const playPauseBtn = document.getElementById("playPauseBtn");

// Check if user clicked on index.html
const userClicked = sessionStorage.getItem('userClicked');

function tryPlayWithSound() {
    video.muted = false;
    video.play().then(() => {
        playPauseBtn.classList.add("hidden");
    }).catch(() => {
        // Autoplay with sound blocked, show play button
        playPauseBtn.classList.remove("hidden");
    });
}

if(userClicked === 'true'){
    tryPlayWithSound();
    sessionStorage.removeItem('userClicked');
} else {
    video.muted = true;
    video.play().catch(() => {});
}

// Toggle pause/play on video click
video.addEventListener("click", () => {
  if (video.paused) {
    video.play();
    playPauseBtn.classList.add("hidden");
  } else {
    video.pause();
    playPauseBtn.classList.remove("hidden");
  }
});

// Play/pause button behavior
playPauseBtn.addEventListener("click", () => {
    if(video.paused){
        video.play();
        playPauseBtn.classList.add("hidden");
    } else {
        video.pause();
        playPauseBtn.classList.remove("hidden");
    }
});

video.addEventListener("play", () => playPauseBtn.classList.add("hidden"));
video.addEventListener("pause", () => playPauseBtn.classList.remove("hidden"));
</script>

</body>
</html>
